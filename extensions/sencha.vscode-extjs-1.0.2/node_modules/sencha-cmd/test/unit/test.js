
const SenchaCmd = require ('../../index'),
      stopCmd = require('../lib/stopCmd'),
      should = require ('../lib/chai_setup'),
      path = require('path');


describe ('cmd', function () {
	it ('should return sencha', function () {
		SenchaCmd.getCmd().should.equal('sencha');
	});
});


describe ('version', function () {
	it ('should return command versions', function () {
		SenchaCmd.cmdVersion().should.equal('6.2.0');
	});
});


describe ('verify', function () {
	it ('should return true', function () {
		SenchaCmd.verifyRequiredVersionInstalled().should.equal(true);
	});
});


describe('appWatch', function () {
	it ('should return true', function () {
		let cwd = path.join(__dirname, '..', 'resources', 'testApp');
		let appWatch = new SenchaCmd(['app', 'watch'], { cwd : cwd });
		// start app watch
		appWatch.start();
		
		// extract pid
		let pid = appWatch.process.pid;

		// kill processes
		stopCmd.stopProcesses();

		// sencha cmd app watch pid > 0
		pid.should.be.above(0);
	});
});