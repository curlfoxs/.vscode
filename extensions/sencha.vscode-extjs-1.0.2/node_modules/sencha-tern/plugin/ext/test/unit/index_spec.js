var should = require('./../lib/chai_setup'),
    Index = require('../../lib/Index'),
    TestUtil = require('../lib/test_util');

describe('Index', function() {
    afterEach(TestUtil.cleanup); // rebuild the server before each test so that test classes don't bleed over between tests

    it('should prune entries for deleted files', function() {
        var index = new Index('file');
        index.put('test', 'value', 'deleted.js');
        Object.keys(index.data).length.should.eq(1);
        index.pruneDeleted();
        Object.keys(index.data).length.should.eq(0);
    })
});