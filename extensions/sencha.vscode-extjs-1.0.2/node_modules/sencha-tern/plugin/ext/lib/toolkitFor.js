"use strict";

var slash = require('slash'),
    appFor = require('./appFor');

/**
 * Returns the toolkit based on the given file
 * @param {String} slashed The full to path to the file
 * @returns {String}
 */
module.exports = function(file) {
    if (typeof(file) !== 'string') throw new Error('file must be a string, not a ' + typeof(slashed));

    var slashed = slash(file);

    if (slashed.match(/(^|\/)(src-)?classic\/src\//)) {
        return 'classic';
    } else if (slashed.match(/(^|\/)(src-)?modern\/src\//)) {
        return 'modern';
    } else {
        var app = appFor(file);
        return app && app.toolkit || 'core';
    }
}